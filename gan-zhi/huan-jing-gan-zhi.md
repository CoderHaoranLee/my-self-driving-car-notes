##### 环境感知是自动驾驶的基本功能，它为车辆提供了驾驶环境的关键信息，包括可行驶区域和周围障碍物的位置，速度，甚至对它们未来状态的预测。环境感知的传感器基本依赖于Lidar，摄像头或者是二者的融合。一些传统的方法也使用了短距和长距雷达以及超声波传感器。不管使用什么传感器，感知任务的两个关键部分为（i）路面检测和（ii）路上物体检测。

### LIDAR

Lidar(light detection and ranging device), 每秒会发射几百万个光脉冲用于探测距离。通过旋转发射光脉冲主轴，可以绘制环境的动态三维地图。Lidar是现有大多数自动驾驶汽车物体检测的核心。图3是3D Lidar理想情况下物体检测的结果，所有的移动物体都被识别出来。

在实际中，Lidar返回的点不可能是完美的。处理这些Lidar点的主要难点在于扫描点比较稀疏，点有缺失，以及散乱的模式。 再加上环境中表面的任意性和不规则性也对感知增加了更多的挑战。有时候在这些可视化后的扫描点中提取出有用的信息对人来说也是非常困难的。

### 表示（representation）
Lidar输出的是从物体上反射回来的稀疏的三维点，每个点对应物体表面相对于Lidar的三维空间位置。这些点的表示方式主要有三种，包括点云，特征（features），栅格（grids）。

基于点云的方法是直接使用传感器的原始数据以进行下一步的处理，这种方法是一种很好的环境表示方式，但是会增加处理数据的时间以及降低内存效率。为了缓和这种缺点，经常会使用基于体素（voxel-based）的滤波方法对原始点云数据进行滤波以减少点的数量。

基于特征的方法是从点云中提取参数化的特征，利用这些提取的特征来表示环境。这些特征通常包含直线和平面。这种方法是存储高效的，特征也经常比较抽象，这种表示方法的精度取决于点云的形状（nature），因为并不是所有的环境特征都能够很好的被表示。

基于网格的方法是将空间离散化成许多小的网格，每个网格表示网格内点云的一些信息。这种方法是内存高效的，并且没有预先定义特征的限制。但是对于离散化网格的大小却不能一概而论。一种自适应八叉树（adaptive octree）的方法可以用于将粗糙的网格进行细化。

### 分割算法

为了理解3D点云信息，一般有两个步骤：分割和分类。为了提高精度和一致性，有时也会包含第三步，时域积分（time integration？）。点云分割是为了将点云聚集成多个群（groups），每个群里点云的性质是相同的。分类是识别这些被聚集成群的点云的类别，像自行车，汽车，行人，路面等。

根据综述文献[30]，点云分割算法可以分为5类：基于边缘的（edge based），基于区域的(region based)，基于属性的（attribute based），基于模型的（model based），基于图的（graph based）。本文将简略回顾这些领域进几年的发展。最后并引出了一个新的类别，基于深度学习算法的。

基于边缘的方法一般是用于一些物体有很明显的人工边缘特征的特殊任务，例如道路边缘检测。但是，对于一般的场景检测，该方法不太适合，并且该方法对噪声点敏感。为了提高算法的鲁棒性，通常会计算关键点的海拔梯度（elevation gradients），并且使用梯度滤波器滤除那些波动点。

基于区域的方法是利用区域生长的机制根据一些特定的准则（例如欧式距离，平面法向量等）将临近的点进行聚类。通常，该过程从一些种子点（seed points）开始，根据预设的准则进行区域扩张（生长）。相比基于边缘的方法，因为考虑了局部邻域的信息，该方法在实际中更有效。文献[37]提出了一种基于扫射线的算法可以找出局部最低点，并以该点作为区域增长的最低点并且根据斜率和海拔（slope and elevation）进行增长以进行地面分割。文献[38]先提取局部点云的法向量和平坦度，然后利用基于特征的方法进行增长以得到树和其他非平面区域的分割。为了使区域增长过程更鲁棒，文献[34]提出了一种自适应的欧式聚类（self-adaptive）的方法。文献[39]提出一种新的属性"不规则度（unevenness）"作为增长的准则，它是根据每个扫描束连续扫描距离的差计算得出。文献[40-42]指出该属性可以更好的检测到小物体，对地面的坡度，车辆的俯仰角和滚转角更不敏感。

在一些文献中，研究着通过采取一些启发式的方法来寻找更有效的产生种子点的方式，这些种子点可以使区域增长更高效和鲁棒。在文献[43]中，Vieira等人在选择种子点之前，先根据曲率去除一些分布在陡峭边缘上的点，因为一般好的种子点都是分布在区域内部（interior），而不是在边缘。在文献[44]中，先估计每个点的法向量（normal），然后选择具有最小残差的点作为种子点。文献[28]提出了一种多策略种子生成方法...

基于区域的分割方法在众多文献中广泛使用，但是这种方法分割的结果严重依赖于种子点的选择。差的种子点往往会导致不充分且低效分割，并且不同的种子点选择往往会导致不同的分割结果。此外，所有基于区域的方法对时间和内存等计算资源的要求都比较高。

基于模型的方法是将点云用一个预设的参数化的模型进行拟合。这些模型一般包括平面，球，圆锥体，圆柱体。这些模型一般都要有高效简洁的数学表达形式。可以拟合模型的内点被聚集在一起作为一个分割。大多数基于模型的方法都是用来进行地面分割的。有两种被广泛使用的模型拟合算法：RANSAC(random sample consensus)和HT(Hough Transform)。因此，基于模型的方法的优缺点和这两种算法的优缺点一致。

需要研究者根据平面假设，利用RANSAC算法对点云中的地面进行分割。然而对于一些不是平面的表面，例如起伏的路面，上坡，下坡，弓型路面（humps）等，该方法就无法拟合这些表面。

为了解决这些情况下的平面分割，Oniga等人利用RANSAC方法拟合二次形式的"平面"。然后利用区域增长的方法改善该二次平面的分割。Asvadi等人将本车前的区域划分成5个等距的子区域，然后利用最小二乘的方法分别拟合各个子区域。文献[23]提出了一种分段地面估计算法，该算法包含4步：切分(slicing)，门限（gating），平面拟合，验证。切分是将本车前的部分划分成点云数量相同的区域。门限步是根据距离四分点方法（interquartile range method）排除区域内的外点。然后利用RANSAC方法对每个区域内进行平面拟合，最后的验证是检查相邻两个平面的法向量和高度。

许多文献中也使用霍夫变换模型拟合的方法去拟合不同的模型，像平面模型，圆柱体和球型。在文献[53,54]中，3D 霍夫变换使用点和法向量来识别点云中的平面结构。文献[55]中，作者提出了一种序列霍夫变换（sequence HT）算法用于检测点云中的圆柱体。相比于传统的需要5D霍夫空间的检测方法，该方法降低了时间和空间复杂度。

像上面提到的，基于模型的方法能够很好的用来平面提取。一般来说，点云分割的第一步都是去除地面，然后其他像区域生长法，在此基础上对剩下的点云进行聚类。但是，基于模型的方法最大的问题是没有考虑邻域信息以及上下文信息（neighborhood and context information），它很有可能把一些随机点拟合成一个特殊模型。此外，该方法对点云的密度，位置精度和噪声比较敏感。

基于属性的方法一般来说有两步，第一步是计算每个点的属性，第二步是根据根据这些属性对点进行聚类。As mentioned in [30], this set of methods allow for more cues to be incorporated into the formulation on top spatial information. 但是分割成功的关键仍然在于隐含的属性。

除了文献[30]中提到的一些方法，文献[56]中提到的基于属性的方法可以分割木棍状的物体，这种分割任务由于比较细窄，往往比较困难。在这种算法中，先确定最有临近点数量的大小。然后根据临近点的信息，利用主成分分析（PCA）的方法提取该点的几何特征（geometric），然后将该特征作为输入，利用LIBSVM把每个点增加3类属性（直线，平面和球）。最后根据这些关联的属性对点进行分割。

文献经常使用的另一种方法是基于图的方法。这种方法将点云数据转换成图的结构，其中每个点作为图中的节点/顶点，相邻的点相互连接构成图中的边。由于基于图的方法可以考虑局部和全局的线索，以及局部的信息，纹理，平滑度等其他特征，可以在全局的范围内进行优化，因此在图像语义分割中有较好的效果。

根据图像分割中的图割方法，在点云分割领域，也有一些研究者使用条件随机场（Conditional Random Field）或马尔可夫随机场（Markov Random Field）以及通过最大流最小割等方法进行点云处理研究。

在文献[59,60]中，作者第一次使用K近邻图，assigned each node according to a background penalty function, added hard foreground constraints, 再通过最小割的方法进行前景和背景的分割。Moosmann等人根据局部凸性测量利用基于图的方法进行了地面和物体的分割。

基于图的方法也常常被用于Lidar和视觉数据融合。相比于其他方法，由于其全局优化的特性，基于图的方法在处理复杂场景下往往鲁棒性更好。这种方法的主要问题在于时间花销比较大，尤其是在优化部分。

由于最近机器学习在计算机视觉领域的发展，一些研究人员开始考虑如何将2D图像中的机器学习框架应用到3D点云的分割和检测中。文献[61]是比较常用的数据集。

在文献[62]中，作者使用了随机森林分类器将每个点分到一个语义类。该分类器是基于light-weight 3D features进行训练的。之后，通过检测语义结构的不同来区分各自的外观（individual facades）。为了提高内存效率和分割精度，Riegler提出了一种基于八叉树网络（Octree Network based）的3D卷基。该方法利用了点云的稀疏性，并且注重内存分配和计算能力，以使网络足够深而又不用对分辨率进行折中。

这些方法是最近发展不久的，在实时应用上还有一些问题，但是这些方法对点云分割问题提供了一个新的视角。像检测算法中提到一样，这些方法可以对检测和分割算法进行整合。

### 检测算法

分割之后，每个聚集的点云簇都需要划分到不同的类别。每个点云簇包含的信息主要是点的空间信息和每个点的反射强度，这些信息对于物体识别来说太少了。有些研究者将视觉的数据和点云数据融合之后做识别，也有也有一些研究者直接利用点云做物体识别。

文献[25]中，作者用一个分类器来识别地面。For each segment, a histogram over all the surface normal vectors' height values was generated, and if the last bin contained the most votes, that segment was classified as ground. 该算法不能区分地面上的物体。

zhang等人利用支撑向量机做分类器，可以区分地面，植物，建筑，电线，和车辆。他们提取了点云的13个特征作为分类器的输入。但是，这个分类器仍然比较粗糙，在自动驾驶中不能很好的使用。

相比于前面提到的几种方法，最近发展的机器学习算法在识别任务上更稳定。在文献[65]中提出了VoxNet方法，该方法利用3D卷积进行点云分类。文献[66]提出了一种基于容量的3D卷积网络，并且introducing auxiliary learning tasks on part of an object and combining data augmentation with multi-orientation pooling. 文献[67]提出了一种3D卷积深度置信网络可以学习到不同类别任意姿态复杂3D形状的分布。